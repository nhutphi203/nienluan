{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\nienluan_khac\\\\client\\\\src\\\\Payments.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { QRCodeCanvas } from \"qrcode.react\"; // üî• Import ƒë√∫ng QRCodeCanvas\nimport \"./Fees.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Payments = ({\n  user\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [fees, setFees] = useState([]);\n  const [paymentMethod, setPaymentMethod] = useState(\"bank\");\n  const [showQR, setShowQR] = useState(false); // üåü State ƒë·ªÉ hi·ªÉn th·ªã QR\n  useEffect(() => {\n    if (!user) {\n      const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n      if (!storedUser) {\n        navigate(\"/login\");\n        return;\n      }\n      fetchFees(storedUser.id);\n    } else {\n      fetchFees(user.id);\n    }\n  }, [user, navigate]);\n  const fetchFees = async studentId => {\n    try {\n      const response = await fetch(`http://localhost:5000/student/fees/${studentId}`);\n      if (!response.ok) throw new Error(\"L·ªói khi t·∫£i h·ªçc ph√≠\");\n      const data = await response.json();\n      setFees(data);\n    } catch (error) {\n      console.error(error);\n      setFees([]);\n    }\n  };\n  const handlePayment = () => {\n    alert(`Thanh to√°n th√†nh c√¥ng b·∫±ng ${paymentMethod === \"bank\" ? \"Chuy·ªÉn kho·∫£n\" : \"Ti·ªÅn m·∫∑t\"}!`);\n  };\n\n  // üî• T·∫°o chu·ªói d·ªØ li·ªáu QR d·ª±a tr√™n th√¥ng tin h·ªçc ph√≠\n  const generateQRValue = () => {\n    const totalAmount = fees.reduce((sum, fee) => sum + (fee.remaining || 0), 0);\n    return `BIDV|CTUB${user.id}|HK2, 2024-2025, MSSV${user.id}, So tien ${totalAmount} VNƒê`;\n  };\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\uD83D\\uDD04 \\u0110ang t\\u1EA3i d\\u1EEF li\\u1EC7u...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 16\n    }, this);\n  }\n};\n_s(Payments, \"moOo0oLTeNmK2DvtmwofRsyUBYI=\", false, function () {\n  return [useNavigate];\n});\n_c = Payments;\nexport default Payments;\nvar _c;\n$RefreshReg$(_c, \"Payments\");","map":{"version":3,"names":["useEffect","useState","useNavigate","QRCodeCanvas","jsxDEV","_jsxDEV","Payments","user","_s","navigate","fees","setFees","paymentMethod","setPaymentMethod","showQR","setShowQR","storedUser","JSON","parse","localStorage","getItem","fetchFees","id","studentId","response","fetch","ok","Error","data","json","error","console","handlePayment","alert","generateQRValue","totalAmount","reduce","sum","fee","remaining","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/nienluan_khac/client/src/Payments.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { QRCodeCanvas } from \"qrcode.react\"; // üî• Import ƒë√∫ng QRCodeCanvas\r\nimport \"./Fees.css\";\r\n\r\nconst Payments = ({ user }) => {\r\n    const navigate = useNavigate();\r\n    const [fees, setFees] = useState([]);\r\n    const [paymentMethod, setPaymentMethod] = useState(\"bank\");\r\n    const [showQR, setShowQR] = useState(false); // üåü State ƒë·ªÉ hi·ªÉn th·ªã QR\r\n    useEffect(() => {\r\n        if (!user) {\r\n            const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n            if (!storedUser) {\r\n                navigate(\"/login\");\r\n                return;\r\n            }\r\n            fetchFees(storedUser.id);\r\n        } else {\r\n            fetchFees(user.id);\r\n        }\r\n    }, [user, navigate]);\r\n\r\n\r\n    const fetchFees = async (studentId) => {\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/student/fees/${studentId}`);\r\n            if (!response.ok) throw new Error(\"L·ªói khi t·∫£i h·ªçc ph√≠\");\r\n            const data = await response.json();\r\n            setFees(data);\r\n        } catch (error) {\r\n            console.error(error);\r\n            setFees([]);\r\n        }\r\n    };\r\n\r\n    const handlePayment = () => {\r\n        alert(`Thanh to√°n th√†nh c√¥ng b·∫±ng ${paymentMethod === \"bank\" ? \"Chuy·ªÉn kho·∫£n\" : \"Ti·ªÅn m·∫∑t\"}!`);\r\n    };\r\n\r\n    // üî• T·∫°o chu·ªói d·ªØ li·ªáu QR d·ª±a tr√™n th√¥ng tin h·ªçc ph√≠\r\n    const generateQRValue = () => {\r\n        const totalAmount = fees.reduce((sum, fee) => sum + (fee.remaining || 0), 0);\r\n        return `BIDV|CTUB${user.id}|HK2, 2024-2025, MSSV${user.id}, So tien ${totalAmount} VNƒê`;\r\n    };\r\n\r\n    if (!user) {\r\n        return <p>üîÑ ƒêang t·∫£i d·ªØ li·ªáu...</p>;\r\n    }\r\n\r\n};\r\n\r\nexport default Payments;\r\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,YAAY,QAAQ,cAAc,CAAC,CAAC;AAC7C,OAAO,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpB,MAAMC,QAAQ,GAAGA,CAAC;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EAC3B,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACW,aAAa,EAAEC,gBAAgB,CAAC,GAAGZ,QAAQ,CAAC,MAAM,CAAC;EAC1D,MAAM,CAACa,MAAM,EAAEC,SAAS,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EAC7CD,SAAS,CAAC,MAAM;IACZ,IAAI,CAACO,IAAI,EAAE;MACP,MAAMS,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;MAC3D,IAAI,CAACJ,UAAU,EAAE;QACbP,QAAQ,CAAC,QAAQ,CAAC;QAClB;MACJ;MACAY,SAAS,CAACL,UAAU,CAACM,EAAE,CAAC;IAC5B,CAAC,MAAM;MACHD,SAAS,CAACd,IAAI,CAACe,EAAE,CAAC;IACtB;EACJ,CAAC,EAAE,CAACf,IAAI,EAAEE,QAAQ,CAAC,CAAC;EAGpB,MAAMY,SAAS,GAAG,MAAOE,SAAS,IAAK;IACnC,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,sCAAsCF,SAAS,EAAE,CAAC;MAC/E,IAAI,CAACC,QAAQ,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,qBAAqB,CAAC;MACxD,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAClClB,OAAO,CAACiB,IAAI,CAAC;IACjB,CAAC,CAAC,OAAOE,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpBnB,OAAO,CAAC,EAAE,CAAC;IACf;EACJ,CAAC;EAED,MAAMqB,aAAa,GAAGA,CAAA,KAAM;IACxBC,KAAK,CAAC,8BAA8BrB,aAAa,KAAK,MAAM,GAAG,cAAc,GAAG,UAAU,GAAG,CAAC;EAClG,CAAC;;EAED;EACA,MAAMsB,eAAe,GAAGA,CAAA,KAAM;IAC1B,MAAMC,WAAW,GAAGzB,IAAI,CAAC0B,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAKD,GAAG,IAAIC,GAAG,CAACC,SAAS,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;IAC5E,OAAO,YAAYhC,IAAI,CAACe,EAAE,wBAAwBf,IAAI,CAACe,EAAE,aAAaa,WAAW,MAAM;EAC3F,CAAC;EAED,IAAI,CAAC5B,IAAI,EAAE;IACP,oBAAOF,OAAA;MAAAmC,QAAA,EAAG;IAAsB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EACxC;AAEJ,CAAC;AAACpC,EAAA,CA7CIF,QAAQ;EAAA,QACOJ,WAAW;AAAA;AAAA2C,EAAA,GAD1BvC,QAAQ;AA+Cd,eAAeA,QAAQ;AAAC,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}